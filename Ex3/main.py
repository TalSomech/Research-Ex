
from typing import Iterable
import doctest

"""This function is used to get all the subset that are less equal to a cetrain target"""


def subset_sum(numbers, target, partial=[], partial_sum=0):
    if partial_sum == target:
        yield partial
    if partial_sum >= target:
        return
    for i, n in enumerate(numbers):
        # remaining = [r <= target for r in numbers]
        remaining = numbers[i + 1:]
        # remaining = [val for val in numbers if val >= 5]
        yield from subset_sum(remaining, target, partial + [n], partial_sum + n)


def bounded_subsets(lst: Iterable, target):
    """
    >>> for s in bounded_subsets([1, 2, 3], 4):
    ...     print(s)
    []
    [1]
    [2]
    [1, 2]
    [3]
    [1, 3]
    >>> for s in bounded_subsets([3, 2, 1], 4):
    ...     print(s)
    []
    [1]
    [2]
    [3]
    [2, 1]
    [3, 1]
    >>> for s in bounded_subsets(range(100,200),25):
    ...     print(s)
    []
    >>> for s in bounded_subsets(range(100,200),250):
    ...     print(s)
    []
    [100]
    [101]
    [102]
    [103]
    [104]
    [105]
    [106]
    [107]
    [108]
    [109]
    [110]
    [111]
    [112]
    [113]
    [114]
    [115]
    [116]
    [117]
    [118]
    [119]
    [120]
    [121]
    [122]
    [123]
    [124]
    [125]
    [126]
    [127]
    [128]
    [129]
    [130]
    [131]
    [132]
    [133]
    [134]
    [135]
    [136]
    [137]
    [138]
    [139]
    [140]
    [141]
    [142]
    [143]
    [144]
    [145]
    [146]
    [147]
    [148]
    [149]
    [150]
    [151]
    [152]
    [153]
    [154]
    [155]
    [156]
    [157]
    [158]
    [159]
    [160]
    [161]
    [162]
    [163]
    [164]
    [165]
    [166]
    [167]
    [168]
    [169]
    [170]
    [171]
    [172]
    [173]
    [174]
    [175]
    [176]
    [177]
    [178]
    [179]
    [180]
    [181]
    [182]
    [183]
    [184]
    [185]
    [186]
    [187]
    [188]
    [189]
    [190]
    [191]
    [192]
    [193]
    [194]
    [195]
    [196]
    [197]
    [198]
    [199]
    [100, 101]
    [100, 102]
    [100, 103]
    [101, 102]
    [100, 104]
    [101, 103]
    [100, 105]
    [101, 104]
    [102, 103]
    [100, 106]
    [101, 105]
    [102, 104]
    [100, 107]
    [101, 106]
    [102, 105]
    [103, 104]
    [100, 108]
    [101, 107]
    [102, 106]
    [103, 105]
    [100, 109]
    [101, 108]
    [102, 107]
    [103, 106]
    [104, 105]
    [100, 110]
    [101, 109]
    [102, 108]
    [103, 107]
    [104, 106]
    [100, 111]
    [101, 110]
    [102, 109]
    [103, 108]
    [104, 107]
    [105, 106]
    [100, 112]
    [101, 111]
    [102, 110]
    [103, 109]
    [104, 108]
    [105, 107]
    [100, 113]
    [101, 112]
    [102, 111]
    [103, 110]
    [104, 109]
    [105, 108]
    [106, 107]
    [100, 114]
    [101, 113]
    [102, 112]
    [103, 111]
    [104, 110]
    [105, 109]
    [106, 108]
    [100, 115]
    [101, 114]
    [102, 113]
    [103, 112]
    [104, 111]
    [105, 110]
    [106, 109]
    [107, 108]
    [100, 116]
    [101, 115]
    [102, 114]
    [103, 113]
    [104, 112]
    [105, 111]
    [106, 110]
    [107, 109]
    [100, 117]
    [101, 116]
    [102, 115]
    [103, 114]
    [104, 113]
    [105, 112]
    [106, 111]
    [107, 110]
    [108, 109]
    [100, 118]
    [101, 117]
    [102, 116]
    [103, 115]
    [104, 114]
    [105, 113]
    [106, 112]
    [107, 111]
    [108, 110]
    [100, 119]
    [101, 118]
    [102, 117]
    [103, 116]
    [104, 115]
    [105, 114]
    [106, 113]
    [107, 112]
    [108, 111]
    [109, 110]
    [100, 120]
    [101, 119]
    [102, 118]
    [103, 117]
    [104, 116]
    [105, 115]
    [106, 114]
    [107, 113]
    [108, 112]
    [109, 111]
    [100, 121]
    [101, 120]
    [102, 119]
    [103, 118]
    [104, 117]
    [105, 116]
    [106, 115]
    [107, 114]
    [108, 113]
    [109, 112]
    [110, 111]
    [100, 122]
    [101, 121]
    [102, 120]
    [103, 119]
    [104, 118]
    [105, 117]
    [106, 116]
    [107, 115]
    [108, 114]
    [109, 113]
    [110, 112]
    [100, 123]
    [101, 122]
    [102, 121]
    [103, 120]
    [104, 119]
    [105, 118]
    [106, 117]
    [107, 116]
    [108, 115]
    [109, 114]
    [110, 113]
    [111, 112]
    [100, 124]
    [101, 123]
    [102, 122]
    [103, 121]
    [104, 120]
    [105, 119]
    [106, 118]
    [107, 117]
    [108, 116]
    [109, 115]
    [110, 114]
    [111, 113]
    [100, 125]
    [101, 124]
    [102, 123]
    [103, 122]
    [104, 121]
    [105, 120]
    [106, 119]
    [107, 118]
    [108, 117]
    [109, 116]
    [110, 115]
    [111, 114]
    [112, 113]
    [100, 126]
    [101, 125]
    [102, 124]
    [103, 123]
    [104, 122]
    [105, 121]
    [106, 120]
    [107, 119]
    [108, 118]
    [109, 117]
    [110, 116]
    [111, 115]
    [112, 114]
    [100, 127]
    [101, 126]
    [102, 125]
    [103, 124]
    [104, 123]
    [105, 122]
    [106, 121]
    [107, 120]
    [108, 119]
    [109, 118]
    [110, 117]
    [111, 116]
    [112, 115]
    [113, 114]
    [100, 128]
    [101, 127]
    [102, 126]
    [103, 125]
    [104, 124]
    [105, 123]
    [106, 122]
    [107, 121]
    [108, 120]
    [109, 119]
    [110, 118]
    [111, 117]
    [112, 116]
    [113, 115]
    [100, 129]
    [101, 128]
    [102, 127]
    [103, 126]
    [104, 125]
    [105, 124]
    [106, 123]
    [107, 122]
    [108, 121]
    [109, 120]
    [110, 119]
    [111, 118]
    [112, 117]
    [113, 116]
    [114, 115]
    [100, 130]
    [101, 129]
    [102, 128]
    [103, 127]
    [104, 126]
    [105, 125]
    [106, 124]
    [107, 123]
    [108, 122]
    [109, 121]
    [110, 120]
    [111, 119]
    [112, 118]
    [113, 117]
    [114, 116]
    [100, 131]
    [101, 130]
    [102, 129]
    [103, 128]
    [104, 127]
    [105, 126]
    [106, 125]
    [107, 124]
    [108, 123]
    [109, 122]
    [110, 121]
    [111, 120]
    [112, 119]
    [113, 118]
    [114, 117]
    [115, 116]
    [100, 132]
    [101, 131]
    [102, 130]
    [103, 129]
    [104, 128]
    [105, 127]
    [106, 126]
    [107, 125]
    [108, 124]
    [109, 123]
    [110, 122]
    [111, 121]
    [112, 120]
    [113, 119]
    [114, 118]
    [115, 117]
    [100, 133]
    [101, 132]
    [102, 131]
    [103, 130]
    [104, 129]
    [105, 128]
    [106, 127]
    [107, 126]
    [108, 125]
    [109, 124]
    [110, 123]
    [111, 122]
    [112, 121]
    [113, 120]
    [114, 119]
    [115, 118]
    [116, 117]
    [100, 134]
    [101, 133]
    [102, 132]
    [103, 131]
    [104, 130]
    [105, 129]
    [106, 128]
    [107, 127]
    [108, 126]
    [109, 125]
    [110, 124]
    [111, 123]
    [112, 122]
    [113, 121]
    [114, 120]
    [115, 119]
    [116, 118]
    [100, 135]
    [101, 134]
    [102, 133]
    [103, 132]
    [104, 131]
    [105, 130]
    [106, 129]
    [107, 128]
    [108, 127]
    [109, 126]
    [110, 125]
    [111, 124]
    [112, 123]
    [113, 122]
    [114, 121]
    [115, 120]
    [116, 119]
    [117, 118]
    [100, 136]
    [101, 135]
    [102, 134]
    [103, 133]
    [104, 132]
    [105, 131]
    [106, 130]
    [107, 129]
    [108, 128]
    [109, 127]
    [110, 126]
    [111, 125]
    [112, 124]
    [113, 123]
    [114, 122]
    [115, 121]
    [116, 120]
    [117, 119]
    [100, 137]
    [101, 136]
    [102, 135]
    [103, 134]
    [104, 133]
    [105, 132]
    [106, 131]
    [107, 130]
    [108, 129]
    [109, 128]
    [110, 127]
    [111, 126]
    [112, 125]
    [113, 124]
    [114, 123]
    [115, 122]
    [116, 121]
    [117, 120]
    [118, 119]
    [100, 138]
    [101, 137]
    [102, 136]
    [103, 135]
    [104, 134]
    [105, 133]
    [106, 132]
    [107, 131]
    [108, 130]
    [109, 129]
    [110, 128]
    [111, 127]
    [112, 126]
    [113, 125]
    [114, 124]
    [115, 123]
    [116, 122]
    [117, 121]
    [118, 120]
    [100, 139]
    [101, 138]
    [102, 137]
    [103, 136]
    [104, 135]
    [105, 134]
    [106, 133]
    [107, 132]
    [108, 131]
    [109, 130]
    [110, 129]
    [111, 128]
    [112, 127]
    [113, 126]
    [114, 125]
    [115, 124]
    [116, 123]
    [117, 122]
    [118, 121]
    [119, 120]
    [100, 140]
    [101, 139]
    [102, 138]
    [103, 137]
    [104, 136]
    [105, 135]
    [106, 134]
    [107, 133]
    [108, 132]
    [109, 131]
    [110, 130]
    [111, 129]
    [112, 128]
    [113, 127]
    [114, 126]
    [115, 125]
    [116, 124]
    [117, 123]
    [118, 122]
    [119, 121]
    [100, 141]
    [101, 140]
    [102, 139]
    [103, 138]
    [104, 137]
    [105, 136]
    [106, 135]
    [107, 134]
    [108, 133]
    [109, 132]
    [110, 131]
    [111, 130]
    [112, 129]
    [113, 128]
    [114, 127]
    [115, 126]
    [116, 125]
    [117, 124]
    [118, 123]
    [119, 122]
    [120, 121]
    [100, 142]
    [101, 141]
    [102, 140]
    [103, 139]
    [104, 138]
    [105, 137]
    [106, 136]
    [107, 135]
    [108, 134]
    [109, 133]
    [110, 132]
    [111, 131]
    [112, 130]
    [113, 129]
    [114, 128]
    [115, 127]
    [116, 126]
    [117, 125]
    [118, 124]
    [119, 123]
    [120, 122]
    [100, 143]
    [101, 142]
    [102, 141]
    [103, 140]
    [104, 139]
    [105, 138]
    [106, 137]
    [107, 136]
    [108, 135]
    [109, 134]
    [110, 133]
    [111, 132]
    [112, 131]
    [113, 130]
    [114, 129]
    [115, 128]
    [116, 127]
    [117, 126]
    [118, 125]
    [119, 124]
    [120, 123]
    [121, 122]
    [100, 144]
    [101, 143]
    [102, 142]
    [103, 141]
    [104, 140]
    [105, 139]
    [106, 138]
    [107, 137]
    [108, 136]
    [109, 135]
    [110, 134]
    [111, 133]
    [112, 132]
    [113, 131]
    [114, 130]
    [115, 129]
    [116, 128]
    [117, 127]
    [118, 126]
    [119, 125]
    [120, 124]
    [121, 123]
    [100, 145]
    [101, 144]
    [102, 143]
    [103, 142]
    [104, 141]
    [105, 140]
    [106, 139]
    [107, 138]
    [108, 137]
    [109, 136]
    [110, 135]
    [111, 134]
    [112, 133]
    [113, 132]
    [114, 131]
    [115, 130]
    [116, 129]
    [117, 128]
    [118, 127]
    [119, 126]
    [120, 125]
    [121, 124]
    [122, 123]
    [100, 146]
    [101, 145]
    [102, 144]
    [103, 143]
    [104, 142]
    [105, 141]
    [106, 140]
    [107, 139]
    [108, 138]
    [109, 137]
    [110, 136]
    [111, 135]
    [112, 134]
    [113, 133]
    [114, 132]
    [115, 131]
    [116, 130]
    [117, 129]
    [118, 128]
    [119, 127]
    [120, 126]
    [121, 125]
    [122, 124]
    [100, 147]
    [101, 146]
    [102, 145]
    [103, 144]
    [104, 143]
    [105, 142]
    [106, 141]
    [107, 140]
    [108, 139]
    [109, 138]
    [110, 137]
    [111, 136]
    [112, 135]
    [113, 134]
    [114, 133]
    [115, 132]
    [116, 131]
    [117, 130]
    [118, 129]
    [119, 128]
    [120, 127]
    [121, 126]
    [122, 125]
    [123, 124]
    [100, 148]
    [101, 147]
    [102, 146]
    [103, 145]
    [104, 144]
    [105, 143]
    [106, 142]
    [107, 141]
    [108, 140]
    [109, 139]
    [110, 138]
    [111, 137]
    [112, 136]
    [113, 135]
    [114, 134]
    [115, 133]
    [116, 132]
    [117, 131]
    [118, 130]
    [119, 129]
    [120, 128]
    [121, 127]
    [122, 126]
    [123, 125]
    [100, 149]
    [101, 148]
    [102, 147]
    [103, 146]
    [104, 145]
    [105, 144]
    [106, 143]
    [107, 142]
    [108, 141]
    [109, 140]
    [110, 139]
    [111, 138]
    [112, 137]
    [113, 136]
    [114, 135]
    [115, 134]
    [116, 133]
    [117, 132]
    [118, 131]
    [119, 130]
    [120, 129]
    [121, 128]
    [122, 127]
    [123, 126]
    [124, 125]
    [100, 150]
    [101, 149]
    [102, 148]
    [103, 147]
    [104, 146]
    [105, 145]
    [106, 144]
    [107, 143]
    [108, 142]
    [109, 141]
    [110, 140]
    [111, 139]
    [112, 138]
    [113, 137]
    [114, 136]
    [115, 135]
    [116, 134]
    [117, 133]
    [118, 132]
    [119, 131]
    [120, 130]
    [121, 129]
    [122, 128]
    [123, 127]
    [124, 126]
    """
    remaining = list([val for val in lst if val <= target])
    for c in range(target + 1):
        for sb in subset_sum(remaining, c):
            k = sb
            yield sb


# Press the green button in the gutter to run the script.
if __name__ == '__main__':
    doctest.testmod()
# See PyCharm help at https://www.jetbrains.com/help/pycharm/
